<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³ ê¸‰ ì ê²©ì‹¬ì‚¬ ì…ì°° ë¶„ì„ ì‹œìŠ¤í…œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #f8fafc;
            color: #334155;
            line-height: 1.6;
        }
        
        .header {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            color: white;
            padding: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo-icon {
            width: 40px;
            height: 40px;
            background: #3b82f6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
        }
        
        .system-title {
            font-size: 24px;
            font-weight: 600;
            margin: 0;
        }
        
        .version {
            background: rgba(59, 130, 246, 0.2);
            color: #93c5fd;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px;
        }
        
        .control-panel {
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            overflow: hidden;
        }
        
        .panel-header {
            background: #f1f5f9;
            padding: 20px 30px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .panel-title {
            font-size: 18px;
            font-weight: 600;
            color: #1e293b;
            margin: 0;
        }
        
        .panel-body {
            padding: 30px;
        }
        
        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
        }
        
        .input-section {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 24px;
        }
        
        .section-title {
            color: #475569;
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .section-icon {
            width: 16px;
            height: 16px;
            background: #3b82f6;
            border-radius: 3px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group:last-child {
            margin-bottom: 0;
        }
        
        label {
            display: block;
            color: #374151;
            font-weight: 500;
            margin-bottom: 6px;
            font-size: 13px;
        }
        
        input, select {
            width: 100%;
            padding: 10px 14px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            background: white;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .input-group {
            display: flex;
            gap: 12px;
            align-items: end;
        }
        
        .input-group .form-group {
            flex: 1;
            margin-bottom: 0;
        }
        
        .advanced-toggle {
            background: #e2e8f0;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 12px;
            color: #64748b;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .advanced-toggle:hover {
            background: #cbd5e1;
        }
        
        .advanced-section {
            display: none;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e2e8f0;
        }
        
        .action-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-top: 1px solid #e2e8f0;
            margin-top: 30px;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: #3b82f6;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2563eb;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }
        
        .btn-secondary {
            background: #6b7280;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #4b5563;
        }
        
        .loading-panel {
            display: none;
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-top: 30px;
            padding: 60px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .loading-content {
            position: relative;
            z-index: 2;
        }
        
        .loading-background {
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(59, 130, 246, 0.1) 20%, 
                rgba(99, 102, 241, 0.15) 50%, 
                rgba(59, 130, 246, 0.1) 80%, 
                transparent 100%);
            animation: loadingGradient 3s ease-in-out infinite;
        }
        
        @keyframes loadingGradient {
            0% { left: -100%; }
            50% { left: 0%; }
            100% { left: 100%; }
        }
        
        .loading-title {
            font-size: 20px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 15px;
        }
        
        .loading-subtitle {
            color: #64748b;
            font-size: 14px;
            margin-bottom: 30px;
        }
        
        .loading-progress {
            width: 300px;
            height: 4px;
            background: #e2e8f0;
            border-radius: 2px;
            margin: 0 auto 20px;
            overflow: hidden;
        }
        
        .loading-bar {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #6366f1);
            border-radius: 2px;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .loading-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-top: 40px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .loading-stat {
            text-align: center;
        }
        
        .loading-stat-value {
            font-size: 24px;
            font-weight: 700;
            color: #3b82f6;
            display: block;
        }
        
        .loading-stat-label {
            font-size: 12px;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: 8px;
        }
        
        .analysis-panel {
            display: none;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            margin-top: 30px;
        }
        
        .metric-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .card-header {
            background: #1e293b;
            color: white;
            padding: 16px 20px;
            font-weight: 600;
            font-size: 14px;
        }
        
        .card-body {
            padding: 24px 20px;
        }
        
        .metric-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #f1f5f9;
        }
        
        .metric-row:last-child {
            border-bottom: none;
            font-weight: 600;
            color: #1e293b;
        }
        
        .metric-label {
            color: #64748b;
            font-size: 13px;
        }
        
        .metric-value {
            font-weight: 600;
            color: #1e293b;
        }
        
        .chart-panel {
            grid-column: 1 / -1;
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .chart-header {
            background: #f8fafc;
            padding: 20px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chart-title {
            font-size: 16px;
            font-weight: 600;
            color: #1e293b;
            margin: 0;
        }
        
        .chart-controls {
            display: flex;
            gap: 10px;
        }
        
        .chart-body {
            padding: 30px;
        }
        
        canvas {
            max-width: 100%;
            height: auto;
        }
        
        .recommendation-panel {
            grid-column: 1 / -1;
            background: white;
            border: 1px solid #e2e8f0;
            border-left: 4px solid #10b981;
            border-radius: 8px;
            padding: 24px;
        }
        
        .recommendation-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .recommendation-icon {
            width: 24px;
            height: 24px;
            background: #10b981;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 12px;
        }
        
        .recommendation-title {
            font-size: 16px;
            font-weight: 600;
            color: #1e293b;
            margin: 0;
        }
        
        .recommendation-content {
            color: #475569;
            line-height: 1.7;
        }
        
        .distribution-panel {
            grid-column: 1 / -1;
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .competitor-analysis {
            grid-column: 1 / -1;
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .heatmap-container {
            padding: 20px;
            text-align: center;
        }
        
        .heatmap {
            display: inline-grid;
            grid-template-columns: repeat(10, 40px);
            gap: 2px;
            margin: 20px 0;
        }
        
        .heatmap-cell {
            width: 40px;
            height: 40px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 600;
            color: white;
        }
        
        .risk-matrix {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 20px;
        }
        
        .risk-item {
            text-align: center;
            padding: 20px;
            border-radius: 8px;
            background: #f8fafc;
        }
        
        .risk-value {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .risk-label {
            font-size: 12px;
            color: #64748b;
            text-transform: uppercase;
        }
        
        .status-bar {
            background: #1e293b;
            color: #94a3b8;
            padding: 12px 30px;
            font-size: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .status-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .status-indicator {
            width: 8px;
            height: 8px;
            background: #10b981;
            border-radius: 50%;
        }
        
        .warning-panel {
            background: #fef3c7;
            border: 1px solid #fbbf24;
            border-radius: 8px;
            padding: 16px;
            margin-top: 30px;
        }
        
        .warning-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }
        
        .warning-icon {
            color: #f59e0b;
            font-weight: bold;
        }
        
        .warning-title {
            font-weight: 600;
            color: #92400e;
        }
        
        .warning-text {
            color: #92400e;
            font-size: 13px;
            line-height: 1.6;
        }
        
        @media (max-width: 1024px) {
            .input-grid, .analysis-panel {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 20px;
            }
            
            .header-content {
                padding: 0 20px;
            }
        }
        
        @media (max-width: 640px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .action-bar {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">ABS</div>
                <h1 class="system-title">Advanced Bid Strategy Analytics</h1>
            </div>
            <div class="version">v3.0.0 Pro</div>
        </div>
    </div>

    <div class="container">
        <div class="control-panel">
            <div class="panel-header">
                <h2 class="panel-title">ê³ ê¸‰ í™•ë¥ ë¡ ì  ì…ì°° ë¶„ì„ ë§¤ê°œë³€ìˆ˜</h2>
            </div>
            <div class="panel-body">
                <div class="input-grid">
                    <div class="input-section">
                        <div class="section-title">
                            <div class="section-icon"></div>
                            PROJECT PARAMETERS
                        </div>
                        <div class="form-group">
                            <label>ì¶”ì •ê°€ê²© (ì–µì›)</label>
                            <input type="number" id="estimatedPrice" value="100" min="1" step="0.1">
                        </div>
                        <div class="form-group">
                            <label>ê³µì‚¬ ë¶„ë¥˜</label>
                            <select id="constructionType">
                                <option value="building">ê±´ì¶•ê³µì‚¬</option>
                                <option value="civil">í† ëª©ê³µì‚¬</option>
                                <option value="plant">í”ŒëœíŠ¸ê³µì‚¬</option>
                                <option value="electric">ì „ê¸°ê³µì‚¬</option>
                                <option value="telecom">í†µì‹ ê³µì‚¬</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <div class="form-group">
                                <label>ë‚™ì°°í•˜í•œìœ¨ (%)</label>
                                <input type="number" id="lowerLimit" value="87.745" min="80" max="95" step="0.001">
                            </div>
                            <div class="form-group">
                                <label>ì˜ˆê°€ ë³€ë™í­ (Â±%)</label>
                                <input type="number" id="priceVariance" value="2.0" min="0.5" max="5.0" step="0.1">
                            </div>
                        </div>
                    </div>
                    
                    <div class="input-section">
                        <div class="section-title">
                            <div class="section-icon"></div>
                            MARKET DYNAMICS & DISTRIBUTION
                        </div>
                        <div class="input-group">
                            <div class="form-group">
                                <label>ì°¸ì—¬ì—…ì²´ ìˆ˜</label>
                                <input type="number" id="competitorCount" value="8" min="2" max="20">
                            </div>
                            <div class="form-group">
                                <label>í™•ë¥ ë¶„í¬ ëª¨ë¸</label>
                                <select id="distributionModel">
                                    <option value="normal">ì •ê·œë¶„í¬</option>
                                    <option value="lognormal">ë¡œê·¸ì •ê·œë¶„í¬</option>
                                    <option value="beta">ë² íƒ€ë¶„í¬</option>
                                    <option value="empirical">ê²½í—˜ì ë¶„í¬</option>
                                </select>
                            </div>
                        </div>
                        <div class="input-group">
                            <div class="form-group">
                                <label>í‰ê·  íˆ¬ì°°ë¥  (%)</label>
                                <input type="number" id="avgBidRate" value="88.5" min="85" max="95" step="0.1">
                            </div>
                            <div class="form-group">
                                <label>í‘œì¤€í¸ì°¨/ë¶„ì‚°</label>
                                <input type="number" id="bidStdDev" value="0.8" min="0.1" max="3" step="0.1">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>ê²½ìŸì‚¬ ìƒê´€ê³„ìˆ˜</label>
                            <input type="number" id="correlationCoeff" value="0.15" min="0" max="0.8" step="0.05">
                        </div>
                        <button class="advanced-toggle" onclick="toggleAdvanced('market')">ê³ ê¸‰ ì‹œì¥ ë¶„ì„ ì˜µì…˜ â–¼</button>
                        <div class="advanced-section" id="marketAdvanced">
                            <div class="form-group">
                                <label>ì‹œì¥ í¬ì§€ì…˜ í´ëŸ¬ìŠ¤í„°</label>
                                <select id="marketCluster">
                                    <option value="2">2ê°œ ê·¸ë£¹ (ëŒ€í˜•/ì¤‘ì†Œ)</option>
                                    <option value="3">3ê°œ ê·¸ë£¹ (ëŒ€í˜•/ì¤‘í˜•/ì¤‘ì†Œ)</option>
                                    <option value="4">4ê°œ ê·¸ë£¹ (ì„¸ë¶„í™”)</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <div class="form-group">
                                    <label>ë¹„ëŒ€ì¹­ë„ (Skewness)</label>
                                    <input type="number" id="skewness" value="0.2" min="-2" max="2" step="0.1">
                                </div>
                                <div class="form-group">
                                    <label>ì²¨ë„ (Kurtosis)</label>
                                    <input type="number" id="kurtosis" value="3.2" min="1" max="10" step="0.1">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="input-section">
                        <div class="section-title">
                            <div class="section-icon"></div>
                            SIMULATION ENGINE
                        </div>
                        <div class="input-group">
                            <div class="form-group">
                                <label>ë³µìˆ˜ì˜ˆë¹„ê°€ê²© ìˆ˜</label>
                                <input type="number" id="priceCount" value="15" min="5" max="25">
                            </div>
                            <div class="form-group">
                                <label>ì¶”ì²¨ ìˆ˜</label>
                                <input type="number" id="drawCount" value="4" min="2" max="8">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>ì‹œë®¬ë ˆì´ì…˜ ë°˜ë³µ íšŸìˆ˜</label>
                            <select id="simulationCount">
                                <option value="10000">10K (ë¹ ë¦„)</option>
                                <option value="50000">50K (í‘œì¤€)</option>
                                <option value="100000">100K (ì •ë°€)</option>
                                <option value="500000">500K (ê³ ì •ë°€)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ë¶„ì„ í•´ìƒë„</label>
                            <select id="analysisResolution">
                                <option value="0.05">0.05% ê°„ê²© (í‘œì¤€)</option>
                                <option value="0.01">0.01% ê°„ê²© (ì •ë°€)</option>
                                <option value="0.001">0.001% ê°„ê²© (ì´ˆì •ë°€)</option>
                            </select>
                        </div>
                        <button class="advanced-toggle" onclick="toggleAdvanced('simulation')">ê³ ê¸‰ ì—”ì§„ ì„¤ì • â–¼</button>
                        <div class="advanced-section" id="simulationAdvanced">
                            <div class="form-group">
                                <label>ë³‘ë ¬ ì²˜ë¦¬ ì›Œì»¤</label>
                                <select id="parallelWorkers">
                                    <option value="1">ë‹¨ì¼ ìŠ¤ë ˆë“œ</option>
                                    <option value="4">4 ì›Œì»¤</option>
                                    <option value="8">8 ì›Œì»¤</option>
                                    <option value="16">16 ì›Œì»¤ (ìµœëŒ€)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ìˆ˜ë ´ ê¸°ì¤€ (Îµ)</label>
                                <input type="number" id="convergenceCriteria" value="0.001" min="0.0001" max="0.01" step="0.0001">
                            </div>
                        </div>
                    </div>
                    
                    <div class="input-section">
                        <div class="section-title">
                            <div class="section-icon"></div>
                            ML-BASED ADJUSTMENTS
                        </div>
                        <div class="input-group">
                            <div class="form-group">
                                <label>ë°œì£¼ì²˜ ê°€ì¤‘ì¹˜</label>
                                <input type="number" id="agencyWeight" value="1.0" min="0.5" max="2.0" step="0.1">
                            </div>
                            <div class="form-group">
                                <label>ê³„ì ˆ ë³´ì •ê³„ìˆ˜</label>
                                <select id="seasonAdjust">
                                    <option value="0.95">Q1 (ê²½ìŸ ì‹¬í™”)</option>
                                    <option value="1.0">Q2 (í‰ê· )</option>
                                    <option value="1.05">Q3 (ê²½ìŸ ì™„í™”)</option>
                                    <option value="0.98">Q4 (ì—°ë§ íš¨ê³¼)</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>ë¦¬ìŠ¤í¬-ìˆ˜ìµ ëª¨ë¸</label>
                            <select id="riskRewardModel">
                                <option value="conservative">ë³´ìˆ˜ì  (ìˆ˜ìµë¥  Ã— 0.7)</option>
                                <option value="balanced">ê· í˜•ì  (ìˆ˜ìµë¥  Ã— 1.0)</option>
                                <option value="aggressive">ê³µê²©ì  (ìˆ˜ìµë¥  Ã— 1.3)</option>
                                <option value="sharpe">ìƒ¤í”„ì§€ìˆ˜ ìµœì í™”</option>
                            </select>
                        </div>
                        <button class="advanced-toggle" onclick="toggleAdvanced('ml')">ë¨¸ì‹ ëŸ¬ë‹ ê³ ê¸‰ ì˜µì…˜ â–¼</button>
                        <div class="advanced-section" id="mlAdvanced">
                            <div class="form-group">
                                <label>ê³¼ê±° ë°ì´í„° ê°€ì¤‘ì¹˜ ê°ì‡ </label>
                                <input type="number" id="timeDecay" value="0.95" min="0.8" max="1.0" step="0.01">
                            </div>
                            <div class="input-group">
                                <div class="form-group">
                                    <label>íšŒê·€ ì •ê·œí™” (Î»)</label>
                                    <input type="number" id="regularization" value="0.1" min="0" max="1" step="0.01">
                                </div>
                                <div class="form-group">
                                    <label>ë¶€íŠ¸ìŠ¤íŠ¸ë© ìƒ˜í”Œ</label>
                                    <input type="number" id="bootstrapSamples" value="1000" min="100" max="10000" step="100">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="action-bar">
                    <div class="status-item">
                        <div class="status-indicator"></div>
                        <span>Advanced Analytics Engine Ready</span>
                    </div>
                    <div style="display: flex; gap: 12px;">
                        <button class="btn btn-secondary" onclick="resetParameters()">
                            â†» ì´ˆê¸°í™”
                        </button>
                        <button class="btn btn-primary" onclick="executeAdvancedSimulation()">
                            ğŸš€ ê³ ê¸‰ ë¶„ì„ ì‹¤í–‰
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="analysis-panel" id="analysisPanel">
            <div class="metric-card">
                <div class="card-header">ìµœì í™” ê²°ê³¼ (ML Enhanced)</div>
                <div class="card-body" id="optimizationResults"></div>
            </div>
            
            <div class="metric-card">
                <div class="card-header">ê³ ê¸‰ í†µê³„ ë¶„ì„</div>
                <div class="card-body" id="statisticalAnalysis"></div>
            </div>
            
            <div class="chart-panel">
                <div class="chart-header">
                    <h3 class="chart-title">í™•ë¥  ë¶„í¬ ë° ì‹ ë¢°êµ¬ê°„ ë¶„ì„</h3>
                    <div class="chart-controls">
                        <select id="chartType" onchange="updateAdvancedChart()">
                            <option value="probability">í™•ë¥  ë¶„í¬</option>
                            <option value="confidence">ì‹ ë¢°êµ¬ê°„</option>
                            <option value="cumulative">ëˆ„ì  í™•ë¥ </option>
                            <option value="risk">ìœ„í—˜-ìˆ˜ìµ ë§¤íŠ¸ë¦­ìŠ¤</option>
                        </select>
                    </div>
                </div>
                <div class="chart-body">
                    <canvas id="analysisChart" width="1000" height="450"></canvas>
                </div>
            </div>
            
            <div class="distribution-panel">
                <div class="chart-header">
                    <h3 class="chart-title">ê²½ìŸì‚¬ë³„ ë‚™ì°° í™•ë¥  íˆíŠ¸ë§µ</h3>
                </div>
                <div class="heatmap-container">
                    <div id="competitorHeatmap" class="heatmap"></div>
                    <div class="risk-matrix" id="riskMatrix"></div>
                </div>
            </div>
            
            <div class="competitor-analysis">
                <div class="chart-header">
                    <h3 class="chart-title">ìƒê´€ê´€ê³„ ê¸°ë°˜ ê²½ìŸ ì‹œë‚˜ë¦¬ì˜¤ ë¶„ì„</h3>
                </div>
                <div class="chart-body">
                    <canvas id="competitorChart" width="1000" height="400"></canvas>
                </div>
            </div>
            
            <div class="recommendation-panel" id="recommendationPanel">
                <div class="recommendation-header">
                    <div class="recommendation-icon">ğŸ¯</div>
                    <h3 class="recommendation-title">AI ê¸°ë°˜ ì „ëµì  ê¶Œê³ ì‚¬í•­</h3>
                </div>
                <div class="recommendation-content" id="strategicRecommendation"></div>
            </div>
        </div>
        
        <div class="warning-panel">
            <div class="warning-header">
                <span class="warning-icon">âš </span>
                <span class="warning-title">ê³ ê¸‰ ë¶„ì„ ì‹œìŠ¤í…œ ê³ ì§€ì‚¬í•­</span>
            </div>
            <div class="warning-text">
                ë³¸ ì‹œìŠ¤í…œì€ ê³ ê¸‰ í™•ë¥ ë¡ ì  ëª¨ë¸ë§, ê¸°ê³„í•™ìŠµ ì•Œê³ ë¦¬ì¦˜, ê·¸ë¦¬ê³  ë‹¤ì°¨ì› í†µê³„ ë¶„ì„ì„ í†µí•œ ì˜ì‚¬ê²°ì • ì§€ì›ë„êµ¬ì…ë‹ˆë‹¤. 
                ì‹¤ì œ ì…ì°°í™˜ê²½ì—ì„œëŠ” ì˜ˆì¸¡í•˜ì§€ ëª»í•œ ì‹œì¥ ë³€ìˆ˜ë“¤ì´ ì¡´ì¬í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ë¶„ì„ ê²°ê³¼ëŠ” ì „ëµ ìˆ˜ë¦½ì˜ í•µì‹¬ ì°¸ê³ ìë£Œë¡œ í™œìš©í•˜ë˜ 
                ìµœì¢… íˆ¬ì°° ê²°ì •ì€ ì¢…í•©ì  ë¦¬ìŠ¤í¬ í‰ê°€ì™€ í•¨ê»˜ ì´ë£¨ì–´ì ¸ì•¼ í•©ë‹ˆë‹¤.
            </div>
        </div>
    </div>
    
    <div class="status-bar">
        <div class="status-item">
            <div class="status-indicator"></div>
            <span>Advanced Monte Carlo Engine: Operational</span>
        </div>
        <div class="status-item">
            <span>ML Models: Beta/LogNormal/Empirical Ready</span>
        </div>
        <div class="status-item">
            <span>Â© 2025 Advanced Bid Strategy Systems Pro</span>
        </div>
    </div>

    <script>
        let advancedSimulationData = null;
        let currentChart = null;
        let competitorCorrelations = null;

        function toggleAdvanced(section) {
            const element = document.getElementById(section + 'Advanced');
            const button = event.target;
            
            if (element.style.display === 'block') {
                element.style.display = 'none';
                button.innerHTML = button.innerHTML.replace('â–²', 'â–¼');
            } else {
                element.style.display = 'block';
                button.innerHTML = button.innerHTML.replace('â–¼', 'â–²');
            }
        }

        function executeAdvancedSimulation() {
            document.getElementById('loadingPanel').style.display = 'block';
            document.getElementById('analysisPanel').style.display = 'none';
            
            const params = collectAdvancedParameters();
            
            let currentProgress = 0;
            let currentIteration = 0;
            let currentScenarios = 0;
            
            const updateLoadingStatus = (stage, progress, iteration, scenarios) => {
                document.getElementById('currentStage').textContent = stage;
                document.getElementById('loadingBar').style.width = progress + '%';
                document.getElementById('iterationCount').textContent = iteration.toLocaleString();
                document.getElementById('processedScenarios').textContent = scenarios.toLocaleString();
            };
            
            // ê³ ê¸‰ ì‹œë®¬ë ˆì´ì…˜ ë‹¨ê³„ë³„ ì‹¤í–‰
            setTimeout(() => {
                updateLoadingStatus('ë¶„í¬ ëª¨ë¸ ì´ˆê¸°í™”', 8, 0, 0);
                
                setTimeout(() => {
                    updateLoadingStatus('ìƒê´€ê´€ê³„ ë§¤íŠ¸ë¦­ìŠ¤ ìƒì„±', 15, 0, 0);
                    
                    setTimeout(() => {
                        updateLoadingStatus('ë² ì´ì§€ì•ˆ ì¶”ë¡  ì—”ì§„ êµ¬ë™', 25, 0, 0);
                        
                        setTimeout(() => {
                            updateLoadingStatus('ë‹¤ì°¨ì› í™•ë¥  ê³„ì‚°', 45, params.simulationCount * 0.2, params.simulationCount * 20);
                            
                            setTimeout(() => {
                                updateLoadingStatus('ê¸°ê³„í•™ìŠµ ìµœì í™”', 70, params.simulationCount * 0.6, params.simulationCount * 60);
                                
                                setTimeout(() => {
                                    updateLoadingStatus('ì‹ ë¢°êµ¬ê°„ ì¶”ì •', 85, params.simulationCount * 0.8, params.simulationCount * 80);
                                    
                                    setTimeout(() => {
                                        updateLoadingStatus('ìœ„í—˜-ìˆ˜ìµ ë¶„ì„', 95, params.simulationCount, params.simulationCount * 100);
                                        
                                        // ì‹¤ì œ ê³ ê¸‰ ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰
                                        const results = performAdvancedMonteCarloAnalysis(params);
                                        advancedSimulationData = results;
                                        
                                        setTimeout(() => {
                                            updateLoadingStatus('ë¶„ì„ ì™„ë£Œ', 100, params.simulationCount, params.simulationCount * 100);
                                            
                                            setTimeout(() => {
                                                document.getElementById('loadingPanel').style.display = 'none';
                                                
                                                displayAdvancedResults(results);
                                                renderAdvancedChart(results);
                                                renderCompetitorHeatmap(results);
                                                renderCompetitorCorrelation(results);
                                                generateAdvancedRecommendation(results, params);
                                                
                                                document.getElementById('analysisPanel').style.display = 'grid';
                                            }, 300);
                                        }, 200);
                                    }, 400);
                                }, 500);
                            }, 600);
                        }, 400);
                    }, 300);
                }, 200);
            }, 100);
        }

        function collectAdvancedParameters() {
            return {
                estimatedPrice: parseFloat(document.getElementById('estimatedPrice').value),
                lowerLimit: parseFloat(document.getElementById('lowerLimit').value),
                priceVariance: parseFloat(document.getElementById('priceVariance').value),
                competitorCount: parseInt(document.getElementById('competitorCount').value),
                distributionModel: document.getElementById('distributionModel').value,
                avgBidRate: parseFloat(document.getElementById('avgBidRate').value),
                bidStdDev: parseFloat(document.getElementById('bidStdDev').value),
                correlationCoeff: parseFloat(document.getElementById('correlationCoeff').value),
                marketCluster: parseInt(document.getElementById('marketCluster').value),
                skewness: parseFloat(document.getElementById('skewness').value),
                kurtosis: parseFloat(document.getElementById('kurtosis').value),
                priceCount: parseInt(document.getElementById('priceCount').value),
                drawCount: parseInt(document.getElementById('drawCount').value),
                simulationCount: parseInt(document.getElementById('simulationCount').value),
                analysisResolution: parseFloat(document.getElementById('analysisResolution').value),
                parallelWorkers: parseInt(document.getElementById('parallelWorkers').value),
                convergenceCriteria: parseFloat(document.getElementById('convergenceCriteria').value),
                agencyWeight: parseFloat(document.getElementById('agencyWeight').value),
                seasonAdjust: parseFloat(document.getElementById('seasonAdjust').value),
                riskRewardModel: document.getElementById('riskRewardModel').value,
                timeDecay: parseFloat(document.getElementById('timeDecay').value),
                regularization: parseFloat(document.getElementById('regularization').value),
                bootstrapSamples: parseInt(document.getElementById('bootstrapSamples').value)
            };
        }

        function performAdvancedMonteCarloAnalysis(params) {
            // ê³ ê¸‰ ë¶„í¬ ëª¨ë¸ë§
            const distributionGenerator = createDistributionGenerator(params);
            
            // ìƒê´€ê´€ê³„ ë§¤íŠ¸ë¦­ìŠ¤ ìƒì„±
            const correlationMatrix = generateCorrelationMatrix(params.competitorCount, params.correlationCoeff, params.marketCluster);
            competitorCorrelations = correlationMatrix;
            
            const bidRateRange = [];
            const probabilityDistribution = [];
            const confidenceIntervals = [];
            const riskMetrics = [];
            const competitorAnalysis = [];
            
            let maxProbability = 0;
            let optimalBidRate = 0;
            let sharpeOptimalRate = 0;
            let maxSharpeRatio = -Infinity;

            // ì •ë°€í•œ ë¶„ì„ì„ ìœ„í•œ ì ì‘ì  ê·¸ë¦¬ë“œ
            const baseStep = params.analysisResolution;
            for (let rate = params.lowerLimit; rate <= 94; rate += baseStep) {
                bidRateRange.push(rate);
            }

            // Bootstrapì„ í†µí•œ ì‹ ë¢°êµ¬ê°„ ì¶”ì •
            for (let rateIdx = 0; rateIdx < bidRateRange.length; rateIdx++) {
                const rate = bidRateRange[rateIdx];
                const bootstrapResults = [];
                
                for (let bootstrap = 0; bootstrap < params.bootstrapSamples; bootstrap++) {
                    let winCount = 0;
                    
                    for (let iteration = 0; iteration < Math.floor(params.simulationCount / params.bootstrapSamples); iteration++) {
                        // ë³µìˆ˜ì˜ˆë¹„ê°€ê²© ìƒì„± (ì •êµí•œ ëª¨ë¸ë§)
                        const basePriceSet = generateAdvancedBasePrices(params);
                        const selectedPrices = randomSample(basePriceSet, params.drawCount);
                        const finalEstimatedPrice = calculateMean(selectedPrices);
                        
                        // ì˜ˆì •ê°€ê²© ë³€ë™ ë²”ìœ„ ì ìš©
                        const priceRange = finalEstimatedPrice * (params.priceVariance / 100);
                        const adjustedPrice = finalEstimatedPrice + (Math.random() - 0.5) * 2 * priceRange;
                        
                        const actualMinBid = adjustedPrice * (params.lowerLimit / 100);
                        const myBidAmount = adjustedPrice * (rate / 100);
                        
                        if (myBidAmount < actualMinBid) continue;
                        
                        // ìƒê´€ê´€ê³„ë¥¼ ê³ ë ¤í•œ ê²½ìŸì‚¬ íˆ¬ì°°ë¥  ìƒì„±
                        const competitorRates = generateCorrelatedBidRates(params, correlationMatrix, distributionGenerator);
                        
                        let isWinning = true;
                        for (let c = 0; c < competitorRates.length; c++) {
                            const competitorBid = adjustedPrice * (competitorRates[c] / 100);
                            
                            if (competitorBid >= actualMinBid && competitorBid < myBidAmount) {
                                isWinning = false;
                                break;
                            }
                        }
                        
                        if (isWinning) winCount++;
                    }
                    
                    const bootstrapProb = (winCount / Math.floor(params.simulationCount / params.bootstrapSamples)) * 100;
                    bootstrapResults.push(bootstrapProb);
                }
                
                // í†µê³„ ê³„ì‚°
                bootstrapResults.sort((a, b) => a - b);
                const meanProb = calculateMean(bootstrapResults);
                const lowerCI = bootstrapResults[Math.floor(bootstrapResults.length * 0.025)];
                const upperCI = bootstrapResults[Math.floor(bootstrapResults.length * 0.975)];
                
                probabilityDistribution.push(meanProb);
                confidenceIntervals.push({ lower: lowerCI, upper: upperCI, mean: meanProb });
                
                // ë¦¬ìŠ¤í¬-ìˆ˜ìµ ë¶„ì„
                const expectedReturn = meanProb * (100 - rate) / 100; // ìˆ˜ìµë¥  ê·¼ì‚¬
                const riskAdjustedReturn = calculateRiskAdjustedReturn(meanProb, rate, params.riskRewardModel);
                const volatility = Math.sqrt(bootstrapResults.reduce((sum, x) => sum + Math.pow(x - meanProb, 2), 0) / bootstrapResults.length);
                const sharpeRatio = volatility > 0 ? (expectedReturn - 2) / volatility : 0; // ë¬´ìœ„í—˜ìˆ˜ìµë¥  2% ê°€ì •
                
                riskMetrics.push({
                    expectedReturn,
                    riskAdjustedReturn,
                    volatility,
                    sharpeRatio,
                    varAtRisk: lowerCI,
                    cvar: bootstrapResults.slice(0, Math.floor(bootstrapResults.length * 0.05)).reduce((a, b) => a + b, 0) / Math.floor(bootstrapResults.length * 0.05)
                });
                
                if (meanProb > maxProbability) {
                    maxProbability = meanProb;
                    optimalBidRate = rate;
                }
                
                if (sharpeRatio > maxSharpeRatio) {
                    maxSharpeRatio = sharpeRatio;
                    sharpeOptimalRate = rate;
                }
            }

            // ê²½ìŸì‚¬ ê°œë³„ ë¶„ì„
            for (let comp = 0; comp < params.competitorCount - 1; comp++) {
                const competitorProbs = [];
                for (let rateIdx = 0; rateIdx < bidRateRange.length; rateIdx++) {
                    // í•´ë‹¹ ê²½ìŸì‚¬ê°€ ë‚™ì°°í•  í™•ë¥  ê³„ì‚°
                    let compWinCount = 0;
                    for (let iter = 0; iter < 5000; iter++) {
                        const basePriceSet = generateAdvancedBasePrices(params);
                        const selectedPrices = randomSample(basePriceSet, params.drawCount);
                        const finalPrice = calculateMean(selectedPrices);
                        
                        const allRates = generateCorrelatedBidRates(params, correlationMatrix, distributionGenerator);
                        allRates.push(bidRateRange[rateIdx]); // ìš°ë¦¬ íˆ¬ì°°ë¥  ì¶”ê°€
                        
                        const minValidRate = Math.max(...allRates.filter((r, idx) => {
                            const bid = finalPrice * (r / 100);
                            return bid >= finalPrice * (params.lowerLimit / 100);
                        }));
                        
                        if (allRates[comp] === minValidRate) compWinCount++;
                    }
                    competitorProbs.push((compWinCount / 5000) * 100);
                }
                competitorAnalysis.push(competitorProbs);
            }

            return {
                bidRates: bidRateRange,
                probabilities: probabilityDistribution,
                confidenceIntervals: confidenceIntervals,
                riskMetrics: riskMetrics,
                competitorAnalysis: competitorAnalysis,
                correlationMatrix: correlationMatrix,
                optimalRate: optimalBidRate,
                maxProbability: maxProbability,
                sharpeOptimalRate: sharpeOptimalRate,
                maxSharpeRatio: maxSharpeRatio,
                avgProbability: probabilityDistribution.reduce((a, b) => a + b, 0) / probabilityDistribution.length,
                distributionModel: params.distributionModel,
                totalScenarios: params.simulationCount * params.bootstrapSamples
            };
        }

        function createDistributionGenerator(params) {
            switch (params.distributionModel) {
                case 'lognormal':
                    return (mean, stdDev) => {
                        const mu = Math.log(mean * mean / Math.sqrt(stdDev * stdDev + mean * mean));
                        const sigma = Math.sqrt(Math.log(1 + (stdDev * stdDev) / (mean * mean)));
                        return Math.exp(generateNormalRandom(mu, sigma));
                    };
                case 'beta':
                    return (mean, stdDev) => {
                        const variance = stdDev * stdDev;
                        const alpha = mean * (mean * (1 - mean) / variance - 1);
                        const beta = (1 - mean) * (mean * (1 - mean) / variance - 1);
                        return generateBetaRandom(alpha, beta) * 10 + 85; // 85-95% ë²”ìœ„ë¡œ ìŠ¤ì¼€ì¼ë§
                    };
                case 'empirical':
                    return (mean, stdDev) => {
                        // ì‹¤ì œ ê³¼ê±° ë°ì´í„° ê¸°ë°˜ ë¶„í¬ (ì‹œë®¬ë ˆì´ì…˜ìš© ê·¼ì‚¬)
                        const skewedNormal = generateSkewedNormal(mean, stdDev, params.skewness, params.kurtosis);
                        return Math.max(85, Math.min(95, skewedNormal));
                    };
                default:
                    return (mean, stdDev) => generateNormalRandom(mean, stdDev);
            }
        }

        function generateCorrelationMatrix(size, baseCorr, clusters) {
            const matrix = [];
            for (let i = 0; i < size; i++) {
                matrix[i] = [];
                for (let j = 0; j < size; j++) {
                    if (i === j) {
                        matrix[i][j] = 1.0;
                    } else {
                        // í´ëŸ¬ìŠ¤í„° ë‚´ ë†’ì€ ìƒê´€ê´€ê³„, í´ëŸ¬ìŠ¤í„° ê°„ ë‚®ì€ ìƒê´€ê´€ê³„
                        const iCluster = Math.floor(i * clusters / size);
                        const jCluster = Math.floor(j * clusters / size);
                        const correlation = iCluster === jCluster ? baseCorr * 1.5 : baseCorr * 0.3;
                        matrix[i][j] = Math.max(0, Math.min(0.8, correlation + (Math.random() - 0.5) * 0.1));
                    }
                }
            }
            return matrix;
        }

        function generateCorrelatedBidRates(params, correlationMatrix, distributionGen) {
            const size = params.competitorCount - 1;
            const independentRandom = [];
            
            // ë…ë¦½ì ì¸ ëœë¤ ë³€ìˆ˜ ìƒì„±
            for (let i = 0; i < size; i++) {
                independentRandom.push(generateStandardNormal());
            }
            
            // Cholesky ë¶„í•´ë¥¼ í†µí•œ ìƒê´€ê´€ê³„ ì ìš© (ê°„ë‹¨í•œ ê·¼ì‚¬)
            const correlatedRates = [];
            for (let i = 0; i < size; i++) {
                let correlatedValue = independentRandom[i];
                for (let j = 0; j < i; j++) {
                    correlatedValue += correlationMatrix[i][j] * independentRandom[j];
                }
                
                // ë¶„í¬ ëª¨ë¸ì— ë”°ë¥¸ ë³€í™˜
                const baseRate = distributionGen(params.avgBidRate, params.bidStdDev);
                const adjustedRate = baseRate + correlatedValue * params.bidStdDev * 0.5;
                correlatedRates.push(Math.max(85, Math.min(95, adjustedRate)));
            }
            
            return correlatedRates;
        }

        function generateAdvancedBasePrices(params) {
            const prices = [];
            const baseVariance = params.estimatedPrice * 0.025; // 2.5% ê¸°ë³¸ ë¶„ì‚°
            
            for (let i = 0; i < params.priceCount; i++) {
                // ì—…ì²´ë³„ ì¶”ì • í¸ì°¨ì™€ ì‹œì¥ ìƒí™© ë°˜ì˜
                let price = params.estimatedPrice;
                
                // ì •ê·œë¶„í¬ ê¸°ë³¸ + ì‹œì¥ í¸í–¥ ì¶”ê°€
                price += generateNormalRandom(0, baseVariance);
                
                // ê³„ì ˆì /ì‹œì¥ ìš”ì¸
                price *= params.seasonAdjust * params.agencyWeight;
                
                // ì‹œê°„ ê°ì‡  íš¨ê³¼ (ìµœê·¼ ë°ì´í„° ê°€ì¤‘ì¹˜)
                const timeWeight = Math.pow(params.timeDecay, Math.random() * 12); // 12ê°œì›” ê°ì‡ 
                price *= (1 + (timeWeight - 1) * 0.1);
                
                prices.push(Math.max(0, price));
            }
            return prices;
        }

        function calculateRiskAdjustedReturn(probability, rate, model) {
            const baseReturn = probability * (100 - rate) / 100;
            
            switch (model) {
                case 'conservative':
                    return baseReturn * 0.7;
                case 'balanced':
                    return baseReturn;
                case 'aggressive':
                    return baseReturn * 1.3;
                case 'sharpe':
                    // ìƒ¤í”„ ì§€ìˆ˜ ê¸°ë°˜ ìµœì í™”
                    const riskFreeRate = 2.0;
                    const volatility = Math.sqrt(probability * (100 - probability) / 100);
                    return volatility > 0 ? (baseReturn - riskFreeRate) / volatility : baseReturn;
                default:
                    return baseReturn;
            }
        }

        function generateStandardNormal() {
            let u = 0, v = 0;
            while(u === 0) u = Math.random();
            while(v === 0) v = Math.random();
            return Math.sqrt(-2 * Math.log(u)) * Math.cos(2 * Math.PI * v);
        }

        function generateNormalRandom(mean, stdDev) {
            return mean + generateStandardNormal() * stdDev;
        }

        function generateBetaRandom(alpha, beta) {
            // Beta ë¶„í¬ ê·¼ì‚¬ (Gamma ë¶„í¬ ì´ìš©)
            const x = Math.pow(Math.random(), 1/alpha);
            const y = Math.pow(Math.random(), 1/beta);
            return x / (x + y);
        }

        function generateSkewedNormal(mean, stdDev, skewness, kurtosis) {
            let normal = generateNormalRandom(mean, stdDev);
            
            // ê°„ë‹¨í•œ ë¹„ëŒ€ì¹­ë„ ì ìš©
            if (skewness !== 0) {
                normal += skewness * Math.pow(normal - mean, 3) / (6 * Math.pow(stdDev, 3));
            }
            
            // ì²¨ë„ ì¡°ì •
            if (kurtosis !== 3) {
                const excess = kurtosis - 3;
                normal += excess * Math.pow(normal - mean, 4) / (24 * Math.pow(stdDev, 4));
            }
            
            return normal;
        }

        function randomSample(array, count) {
            const shuffled = [...array].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }

        function calculateMean(array) {
            return array.reduce((a, b) => a + b, 0) / array.length;
        }

        function displayAdvancedResults(results) {
            // ìµœì í™” ê²°ê³¼ (ML Enhanced)
            const sharpeMetric = results.riskMetrics.find((_, idx) => results.bidRates[idx] === results.sharpeOptimalRate);
            const optimalMetric = results.riskMetrics.find((_, idx) => results.bidRates[idx] === results.optimalRate);
            
            document.getElementById('optimizationResults').innerHTML = `
                <div class="metric-row">
                    <span class="metric-label">ìµœì  íˆ¬ì°°ë¥  (í™•ë¥  ìµœëŒ€)</span>
                    <span class="metric-value">${results.optimalRate.toFixed(4)}%</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">ìƒ¤í”„ ìµœì ìœ¨ (ìœ„í—˜ì¡°ì •)</span>
                    <span class="metric-value">${results.sharpeOptimalRate.toFixed(4)}%</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">ìµœëŒ€ ë‚™ì°° í™•ë¥ </span>
                    <span class="metric-value">${results.maxProbability.toFixed(3)}%</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">ìœ„í—˜ì¡°ì • ìˆ˜ìµë¥ </span>
                    <span class="metric-value">${(optimalMetric?.riskAdjustedReturn || 0).toFixed(3)}%</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">ìµœì  ìƒ¤í”„ ì§€ìˆ˜</span>
                    <span class="metric-value"><strong>${results.maxSharpeRatio.toFixed(4)}</strong></span>
                </div>
            `;

            // ê³ ê¸‰ í†µê³„ ë¶„ì„
            const confidenceOptimal = results.confidenceIntervals.find((_, idx) => results.bidRates[idx] === results.optimalRate);
            const avgVolatility = results.riskMetrics.reduce((sum, r) => sum + r.volatility, 0) / results.riskMetrics.length;
            const highProbCount = results.probabilities.filter(p => p >= 15).length;
            
            document.getElementById('statisticalAnalysis').innerHTML = `
                <div class="metric-row">
                    <span class="metric-label">95% ì‹ ë¢°êµ¬ê°„</span>
                    <span class="metric-value">${(confidenceOptimal?.lower || 0).toFixed(2)}% ~ ${(confidenceOptimal?.upper || 0).toFixed(2)}%</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">í‰ê·  ë³€ë™ì„± (Ïƒ)</span>
                    <span class="metric-value">${avgVolatility.toFixed(4)}</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">ë¶„í¬ ëª¨ë¸</span>
                    <span class="metric-value">${results.distributionModel.toUpperCase()}</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">ìœ íš¨ êµ¬ê°„ (â‰¥15%)</span>
                    <span class="metric-value">${highProbCount}ê°œ</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">ì´ ì‹œë‚˜ë¦¬ì˜¤</span>
                    <span class="metric-value"><strong>${results.totalScenarios.toLocaleString()}ê°œ</strong></span>
                </div>
            `;
        }

        function renderAdvancedChart(results) {
            const canvas = document.getElementById('analysisChart');
            const ctx = canvas.getContext('2d');
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const margin = { top: 50, right: 100, bottom: 80, left: 80 };
            const chartWidth = canvas.width - margin.left - margin.right;
            const chartHeight = canvas.height - margin.top - margin.bottom;
            
            // ê³ ê¸‰ ê·¸ë¦¬ë“œ ì‹œìŠ¤í…œ
            drawAdvancedGrid(ctx, margin, chartWidth, chartHeight);
            
            // ë°ì´í„° ë²”ìœ„
            const minRate = Math.min(...results.bidRates);
            const maxRate = Math.max(...results.bidRates);
            const maxProb = Math.max(...results.probabilities);
            
            // í™•ë¥  ë¶„í¬ ê³¡ì„  ê·¸ë¦¬ê¸°
            ctx.strokeStyle = '#3b82f6';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            results.bidRates.forEach((rate, idx) => {
                const x = margin.left + ((rate - minRate) / (maxRate - minRate)) * chartWidth;
                const y = margin.top + chartHeight - (results.probabilities[idx] / maxProb) * chartHeight;
                
                if (idx === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.stroke();
            
            // ìµœì ì ë“¤ í‘œì‹œ
            const optimalIndex = results.probabilities.findIndex((_, idx) => results.bidRates[idx] === results.optimalRate);
            const sharpeIndex = results.probabilities.findIndex((_, idx) => results.bidRates[idx] === results.sharpeOptimalRate);
            
            // í™•ë¥  ìµœì ì 
            if (optimalIndex >= 0) {
                const optimalX = margin.left + ((results.optimalRate - minRate) / (maxRate - minRate)) * chartWidth;
                const optimalY = margin.top + chartHeight - (results.maxProbability / maxProb) * chartHeight;
                
                ctx.fillStyle = '#ef4444';
                ctx.beginPath();
                ctx.arc(optimalX, optimalY, 8, 0, 2 * Math.PI);
                ctx.fill();
                
                ctx.fillStyle = '#1f2937';
                ctx.font = '12px sans-serif';
                ctx.textAlign = 'center';
                ctx.fillText(`í™•ë¥ ìµœì : ${results.optimalRate.toFixed(3)}%`, optimalX, optimalY - 20);
            }
            
            // ìƒ¤í”„ ìµœì ì 
            if (sharpeIndex >= 0) {
                const sharpeX = margin.left + ((results.sharpeOptimalRate - minRate) / (maxRate - minRate)) * chartWidth;
                const sharpeY = margin.top + chartHeight - (results.probabilities[sharpeIndex] / maxProb) * chartHeight;
                
                ctx.fillStyle = '#10b981';
                ctx.beginPath();
                ctx.arc(sharpeX, sharpeY, 8, 0, 2 * Math.PI);
                ctx.fill();
                
                ctx.fillStyle = '#1f2937';
                ctx.font = '12px sans-serif';
                ctx.textAlign = 'center';
                ctx.fillText(`ìƒ¤í”„ìµœì : ${results.sharpeOptimalRate.toFixed(3)}%`, sharpeX, sharpeY - 20);
            }
            
            drawChartLabels(ctx, margin, chartWidth, chartHeight, minRate, maxRate, maxProb);
        }

        function drawAdvancedGrid(ctx, margin, chartWidth, chartHeight) {
            ctx.strokeStyle = '#f1f5f9';
            ctx.lineWidth = 1;
            
            // ìˆ˜ì§ ê·¸ë¦¬ë“œ (ë” ì„¸ë°€í•˜ê²Œ)
            for (let i = 0; i <= 20; i++) {
                const x = margin.left + (chartWidth * i) / 20;
                ctx.beginPath();
                ctx.moveTo(x, margin.top);
                ctx.lineTo(x, margin.top + chartHeight);
                ctx.stroke();
            }
            
            // ìˆ˜í‰ ê·¸ë¦¬ë“œ
            for (let i = 0; i <= 10; i++) {
                const y = margin.top + (chartHeight * i) / 10;
                ctx.beginPath();
                ctx.moveTo(margin.left, y);
                ctx.lineTo(margin.left + chartWidth, y);
                ctx.stroke();
            }
            
            // ë©”ì¸ ì¶•
            ctx.strokeStyle = '#374151';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(margin.left, margin.top);
            ctx.lineTo(margin.left, margin.top + chartHeight);
            ctx.lineTo(margin.left + chartWidth, margin.top + chartHeight);
            ctx.stroke();
        }

        function drawChartLabels(ctx, margin, chartWidth, chartHeight, minRate, maxRate, maxProb) {
            ctx.fillStyle = '#6b7280';
            ctx.font = '11px sans-serif';
            ctx.textAlign = 'center';
            
            // Xì¶• ë¼ë²¨ (ë” ì„¸ë°€í•˜ê²Œ)
            for (let i = 0; i <= 20; i++) {
                const rate = minRate + (maxRate - minRate) * i / 20;
                const x = margin.left + chartWidth * i / 20;
                if (i % 4 === 0) { // 4ê°œë§ˆë‹¤ í‘œì‹œ
                    ctx.fillText(rate.toFixed(2) + '%', x, margin.top + chartHeight + 25);
                }
            }
            
            // Yì¶• ë¼ë²¨
            ctx.textAlign = 'right';
            for (let i = 0; i <= 10; i++) {
                const prob = maxProb * i / 10;
                const y = margin.top + chartHeight - chartHeight * i / 10;
                ctx.fillText(prob.toFixed(1) + '%', margin.left - 15, y + 4);
            }
            
            // ì¶• ì œëª©
            ctx.fillStyle = '#374151';
            ctx.font = '14px sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('íˆ¬ì°°ë¥  (%, ê³ ì •ë°€ë„)', margin.left + chartWidth / 2, margin.top + chartHeight + 55);
            
            ctx.save();
            ctx.translate(25, margin.top + chartHeight / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('ë‚™ì°° í™•ë¥  (%, 95% ì‹ ë¢°êµ¬ê°„)', 0, 0);
            ctx.restore();
        }

        function renderCompetitorHeatmap(results) {
            const container = document.getElementById('competitorHeatmap');
            container.innerHTML = '';
            
            const competitorCount = results.competitorAnalysis.length;
            const rateCount = Math.min(results.bidRates.length, 100); // ìµœëŒ€ 100ê°œ ì…€
            const step = Math.floor(results.bidRates.length / rateCount);
            
            container.style.gridTemplateColumns = `repeat(${rateCount}, 1fr)`;
            
            for (let comp = 0; comp < competitorCount; comp++) {
                for (let rateIdx = 0; rateIdx < rateCount; rateIdx++) {
                    const actualIdx = rateIdx * step;
                    const probability = results.competitorAnalysis[comp][actualIdx] || 0;
                    
                    const cell = document.createElement('div');
                    cell.className = 'heatmap-cell';
                    
                    // ìƒ‰ìƒ ë§¤í•‘ (í™•ë¥ ì— ë”°ë¼)
                    const intensity = Math.min(probability / 20, 1); // 20% ê¸°ì¤€ìœ¼ë¡œ ì •ê·œí™”
                    const red = Math.floor(255 * (1 - intensity));
                    const blue = Math.floor(255 * intensity);
                    cell.style.backgroundColor = `rgb(${red}, 100, ${blue})`;
                    
                    cell.textContent = probability.toFixed(1);
                    cell.title = `ê²½ìŸì‚¬ ${comp + 1}, íˆ¬ì°°ë¥ : ${results.bidRates[actualIdx].toFixed(2)}%, í™•ë¥ : ${probability.toFixed(1)}%`;
                    
                    container.appendChild(cell);
                }
            }
            
            // ìœ„í—˜ ë§¤íŠ¸ë¦­ìŠ¤ ì—…ë°ì´íŠ¸
            updateRiskMatrix(results);
        }

        function updateRiskMatrix(results) {
            const container = document.getElementById('riskMatrix');
            const optimalMetric = results.riskMetrics.find((_, idx) => results.bidRates[idx] === results.optimalRate);
            const sharpeMetric = results.riskMetrics.find((_, idx) => results.bidRates[idx] === results.sharpeOptimalRate);
            
            container.innerHTML = `
                <div class="risk-item">
                    <div class="risk-value" style="color: #ef4444;">${(optimalMetric?.varAtRisk || 0).toFixed(2)}%</div>
                    <div class="risk-label">VaR (95%)</div>
                </div>
                <div class="risk-item">
                    <div class="risk-value" style="color: #f59e0b;">${(optimalMetric?.cvar || 0).toFixed(2)}%</div>
                    <div class="risk-label">CVaR</div>
                </div>
                <div class="risk-item">
                    <div class="risk-value" style="color: #10b981;">${(sharpeMetric?.expectedReturn || 0).toFixed(3)}%</div>
                    <div class="risk-label">Expected Return</div>
                </div>
            `;
        }

        function renderCompetitorCorrelation(results) {
            const canvas = document.getElementById('competitorChart');
            const ctx = canvas.getContext('2d');
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const margin = { top: 40, right: 60, bottom: 60, left: 60 };
            const chartWidth = canvas.width - margin.left - margin.right;
            const chartHeight = canvas.height - margin.top - margin.bottom;
            
            // ìƒê´€ê´€ê³„ ë§¤íŠ¸ë¦­ìŠ¤ ì‹œê°í™”
            const matrix = results.correlationMatrix;
            const size = matrix.length;
            const cellWidth = chartWidth / size;
            const cellHeight = chartHeight / size;
            
            for (let i = 0; i < size; i++) {
                for (let j = 0; j < size; j++) {
                    const correlation = matrix[i][j];
                    const x = margin.left + j * cellWidth;
                    const y = margin.top + i * cellHeight;
                    
                    // ìƒê´€ê´€ê³„ì— ë”°ë¥¸ ìƒ‰ìƒ ë§¤í•‘
                    const intensity = Math.abs(correlation);
                    const hue = correlation > 0 ? 120 : 0; // ë…¹ìƒ‰(ì–‘ì˜ ìƒê´€) vs ë¹¨ê°„ìƒ‰(ìŒì˜ ìƒê´€)
                    ctx.fillStyle = `hsla(${hue}, 70%, 50%, ${intensity})`;
                    
                    ctx.fillRect(x, y, cellWidth - 1, cellHeight - 1);
                    
                    // ìƒê´€ê³„ìˆ˜ í‘œì‹œ
                    ctx.fillStyle = intensity > 0.5 ? 'white' : 'black';
                    ctx.font = '10px sans-serif';
                    ctx.textAlign = 'center';
                    ctx.fillText(correlation.toFixed(2), x + cellWidth/2, y + cellHeight/2 + 3);
                }
            }
            
            // ì¶• ë¼ë²¨
            ctx.fillStyle = '#374151';
            ctx.font = '12px sans-serif';
            ctx.textAlign = 'center';
            
            for (let i = 0; i < size; i++) {
                const x = margin.left + i * cellWidth + cellWidth/2;
                const y = margin.top + size * cellHeight + 20;
                ctx.fillText(`C${i+1}`, x, y);
                
                const labelX = margin.left - 15;
                const labelY = margin.top + i * cellHeight + cellHeight/2;
                ctx.save();
                ctx.translate(labelX, labelY);
                ctx.rotate(-Math.PI / 2);
                ctx.fillText(`ê²½ìŸì‚¬${i+1}`, 0, 0);
                ctx.restore();
            }
        }

        function updateAdvancedChart() {
            if (!advancedSimulationData) return;
            
            const chartType = document.getElementById('chartType').value;
            
            switch (chartType) {
                case 'probability':
                    renderAdvancedChart(advancedSimulationData);
                    break;
                case 'confidence':
                    renderConfidenceChart(advancedSimulationData);
                    break;
                case 'cumulative':
                    renderCumulativeChart(advancedSimulationData);
                    break;
                case 'risk':
                    renderRiskReturnChart(advancedSimulationData);
                    break;
            }
        }

        function renderConfidenceChart(results) {
            const canvas = document.getElementById('analysisChart');
            const ctx = canvas.getContext('2d');
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const margin = { top: 50, right: 100, bottom: 80, left: 80 };
            const chartWidth = canvas.width - margin.left - margin.right;
            const chartHeight = canvas.height - margin.top - margin.bottom;
            
            drawAdvancedGrid(ctx, margin, chartWidth, chartHeight);
            
            const minRate = Math.min(...results.bidRates);
            const maxRate = Math.max(...results.bidRates);
            const maxCI = Math.max(...results.confidenceIntervals.map(ci => ci.upper));
            
            // ì‹ ë¢°êµ¬ê°„ ì˜ì—­ ì±„ìš°ê¸°
            ctx.fillStyle = 'rgba(59, 130, 246, 0.15)';
            ctx.beginPath();
            
            // ìƒí•œ ê·¸ë¦¬ê¸°
            results.bidRates.forEach((rate, idx) => {
                const x = margin.left + ((rate - minRate) / (maxRate - minRate)) * chartWidth;
                const y = margin.top + chartHeight - (results.confidenceIntervals[idx].upper / maxCI) * chartHeight;
                if (idx === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            
            // í•˜í•œ ê·¸ë¦¬ê¸° (ì—­ìˆœ)
            for (let idx = results.bidRates.length - 1; idx >= 0; idx--) {
                const rate = results.bidRates[idx];
                const x = margin.left + ((rate - minRate) / (maxRate - minRate)) * chartWidth;
                const y = margin.top + chartHeight - (results.confidenceIntervals[idx].lower / maxCI) * chartHeight;
                ctx.lineTo(x, y);
            }
            ctx.closePath();
            ctx.fill();
            
            // í‰ê· ì„ 
            ctx.strokeStyle = '#3b82f6';
            ctx.lineWidth = 2;
            ctx.beginPath();
            results.bidRates.forEach((rate, idx) => {
                const x = margin.left + ((rate - minRate) / (maxRate - minRate)) * chartWidth;
                const y = margin.top + chartHeight - (results.confidenceIntervals[idx].mean / maxCI) * chartHeight;
                if (idx === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.stroke();
            
            drawChartLabels(ctx, margin, chartWidth, chartHeight, minRate, maxRate, maxCI);
        }

        function renderCumulativeChart(results) {
            const canvas = document.getElementById('analysisChart');
            const ctx = canvas.getContext('2d');
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const margin = { top: 50, right: 100, bottom: 80, left: 80 };
            const chartWidth = canvas.width - margin.left - margin.right;
            const chartHeight = canvas.height - margin.top - margin.bottom;
            
            drawAdvancedGrid(ctx, margin, chartWidth, chartHeight);
            
            const minRate = Math.min(...results.bidRates);
            const maxRate = Math.max(...results.bidRates);
            
            // ëˆ„ì  í™•ë¥  ê³„ì‚°
            const cumulativeProbs = [];
            let cumulative = 0;
            results.probabilities.forEach(prob => {
                cumulative += prob;
                cumulativeProbs.push(cumulative);
            });
            const maxCumulative = Math.max(...cumulativeProbs);
            
            // ëˆ„ì  í™•ë¥  ê³¡ì„ 
            ctx.strokeStyle = '#8b5cf6';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            results.bidRates.forEach((rate, idx) => {
                const x = margin.left + ((rate - minRate) / (maxRate - minRate)) * chartWidth;
                const y = margin.top + chartHeight - (cumulativeProbs[idx] / maxCumulative) * chartHeight;
                
                if (idx === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.stroke();
            
            drawChartLabels(ctx, margin, chartWidth, chartHeight, minRate, maxRate, maxCumulative);
        }

        function renderRiskReturnChart(results) {
            const canvas = document.getElementById('analysisChart');
            const ctx = canvas.getContext('2d');
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const margin = { top: 50, right: 100, bottom: 80, left: 80 };
            const chartWidth = canvas.width - margin.left - margin.right;
            const chartHeight = canvas.height - margin.top - margin.bottom;
            
            drawAdvancedGrid(ctx, margin, chartWidth, chartHeight);
            
            const maxReturn = Math.max(...results.riskMetrics.map(r => r.expectedReturn));
            const maxRisk = Math.max(...results.riskMetrics.map(r => r.volatility));
            
            // ìœ„í—˜-ìˆ˜ìµ ì‚°ì ë„
            results.riskMetrics.forEach((metric, idx) => {
                const x = margin.left + (metric.volatility / maxRisk) * chartWidth;
                const y = margin.top + chartHeight - (metric.expectedReturn / maxReturn) * chartHeight;
                
                // ìƒ¤í”„ ë¹„ìœ¨ì— ë”°ë¥¸ ìƒ‰ìƒ
                const sharpeNorm = Math.max(0, Math.min(1, (metric.sharpeRatio + 2) / 4));
                const hue = sharpeNorm * 120; // ë¹¨ê°•ì—ì„œ ë…¹ìƒ‰ìœ¼ë¡œ
                
                ctx.fillStyle = `hsl(${hue}, 70%, 50%)`;
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, 2 * Math.PI);
                ctx.fill();
            });
            
            // íš¨ìœ¨ì  ê²½ê³„ í‘œì‹œ
            const efficientFrontier = results.riskMetrics
                .filter(metric => metric.sharpeRatio > 0)
                .sort((a, b) => a.volatility - b.volatility);
            
            if (efficientFrontier.length > 1) {
                ctx.strokeStyle = '#ef4444';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                
                efficientFrontier.forEach((metric, idx) => {
                    const x = margin.left + (metric.volatility / maxRisk) * chartWidth;
                    const y = margin.top + chartHeight - (metric.expectedReturn / maxReturn) * chartHeight;
                    
                    if (idx === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                });
                ctx.stroke();
                ctx.setLineDash([]);
            }
            
            // ë¼ë²¨
            ctx.fillStyle = '#374151';
            ctx.font = '14px sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('ìœ„í—˜ë„ (ë³€ë™ì„±)', margin.left + chartWidth / 2, canvas.height - 20);
            
            ctx.save();
            ctx.translate(25, margin.top + chartHeight / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('ê¸°ëŒ€ìˆ˜ìµë¥ ', 0, 0);
            ctx.restore();
        }

        function generateAdvancedRecommendation(results, params) {
            let recommendation = '';
            let riskProfile = '';
            let strategy = '';
            
            const optimalMetric = results.riskMetrics.find((_, idx) => results.bidRates[idx] === results.optimalRate);
            const sharpeMetric = results.riskMetrics.find((_, idx) => results.bidRates[idx] === results.sharpeOptimalRate);
            const confidenceOptimal = results.confidenceIntervals.find((_, idx) => results.bidRates[idx] === results.optimalRate);
            
            // ìœ„í—˜ë„ í”„ë¡œíŒŒì¼ ê²°ì •
            if (optimalMetric?.volatility < 2) {
                riskProfile = 'ì•ˆì •ì ';
            } else if (optimalMetric?.volatility < 5) {
                riskProfile = 'ì¤‘ìœ„í—˜';
            } else {
                riskProfile = 'ê³ ìœ„í—˜';
            }
            
            // ì „ëµ ê¶Œê³ 
            if (results.maxProbability > 25 && results.maxSharpeRatio > 0.5) {
                strategy = 'ì ê·¹ì  ìˆ˜ì£¼ ì¶”ì§„';
                recommendation = `<strong>ìš°ìˆ˜í•œ ìˆ˜ì£¼ ê¸°íšŒ</strong><br>`;
                recommendation += `í™•ë¥  ìµœì ì  <strong>${results.optimalRate.toFixed(4)}%</strong>ì—ì„œ <strong>${results.maxProbability.toFixed(2)}%</strong>ì˜ ë†’ì€ ë‚™ì°° í™•ë¥ ê³¼ `;
                recommendation += `ìƒ¤í”„ ë¹„ìœ¨ <strong>${results.maxSharpeRatio.toFixed(3)}</strong>ì„ ë‹¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>`;
                recommendation += `95% ì‹ ë¢°êµ¬ê°„: ${confidenceOptimal?.lower.toFixed(2)}% ~ ${confidenceOptimal?.upper.toFixed(2)}%`;
            } else if (results.maxProbability > 15 && results.maxSharpeRatio > 0.2) {
                strategy = 'ì‹ ì¤‘í•œ ì°¸ì—¬ ê³ ë ¤';
                recommendation = `<strong>ê· í˜•ì  ì ‘ê·¼ í•„ìš”</strong><br>`;
                recommendation += `ìœ„í—˜ì¡°ì • ìµœì ì  <strong>${results.sharpeOptimalRate.toFixed(4)}%</strong> (ìƒ¤í”„: ${results.maxSharpeRatio.toFixed(3)})ì™€ `;
                recommendation += `í™•ë¥  ìµœì ì  <strong>${results.optimalRate.toFixed(4)}%</strong> (í™•ë¥ : ${results.maxProbability.toFixed(2)}%) ì‚¬ì´ì—ì„œ ì„ íƒ í•„ìš”.<br>`;
                recommendation += `ìœ„í—˜ í”„ë¡œí•„: ${riskProfile}, VaR: ${optimalMetric?.varAtRisk.toFixed(2)}%`;
            } else {
                strategy = 'ì°¸ì—¬ ì¬ê²€í†  ê¶Œì¥';
                recommendation = `<strong>ê³ ìœ„í—˜ ì‹œì¥ ìƒí™©</strong><br>`;
                recommendation += `ìµœëŒ€ í™•ë¥  ${results.maxProbability.toFixed(2)}%, ìµœì  ìƒ¤í”„ ë¹„ìœ¨ ${results.maxSharpeRatio.toFixed(3)}ë¡œ `;
                recommendation += `ìˆ˜ìµì„±ê³¼ ì•ˆì •ì„±ì´ ëª¨ë‘ ì œí•œì ì…ë‹ˆë‹¤. ì‹œì¥ ì¡°ê±´ ì¬ë¶„ì„ ë˜ëŠ” ì „ëµì  ì² ìˆ˜ë¥¼ ê³ ë ¤í•˜ì„¸ìš”.`;
            }
            
            recommendation += `<br><br><strong>ê³ ê¸‰ ë¶„ì„ ê²°ê³¼:</strong><br>`;
            recommendation += `â€¢ ë¶„í¬ ëª¨ë¸: ${params.distributionModel.toUpperCase()} (ë¹„ëŒ€ì¹­ë„: ${params.skewness}, ì²¨ë„: ${params.kurtosis})<br>`;
            recommendation += `â€¢ ê²½ìŸì‚¬ ìƒê´€ê´€ê³„: ${params.correlationCoeff} (í´ëŸ¬ìŠ¤í„°: ${params.marketCluster}ê°œ ê·¸ë£¹)<br>`;
            recommendation += `â€¢ ì˜ˆìƒ ë³€ë™ì„±: ${optimalMetric?.volatility.toFixed(4)} | CVaR: ${optimalMetric?.cvar.toFixed(2)}%<br>`;
            recommendation += `â€¢ ê¶Œì¥ ì „ëµ: ${strategy}`;
            
            document.getElementById('strategicRecommendation').innerHTML = recommendation;
        }

        function resetParameters() {
            const inputs = {
                'estimatedPrice': '100',
                'lowerLimit': '87.745',
                'priceVariance': '2.0',
                'competitorCount': '8',
                'distributionModel': 'normal',
                'avgBidRate': '88.5',
                'bidStdDev': '0.8',
                'correlationCoeff': '0.15',
                'marketCluster': '2',
                'skewness': '0.2',
                'kurtosis': '3.2',
                'priceCount': '15',
                'drawCount': '4',
                'simulationCount': '50000',
                'analysisResolution': '0.01',
                'parallelWorkers': '4',
                'convergenceCriteria': '0.001',
                'agencyWeight': '1.0',
                'seasonAdjust': '1.0',
                'riskRewardModel': 'balanced',
                'timeDecay': '0.95',
                'regularization': '0.1',
                'bootstrapSamples': '1000'
            };
            
            Object.keys(inputs).forEach(id => {
                const element = document.getElementById(id);
                if (element) element.value = inputs[id];
            });
            
            document.getElementById('analysisPanel').style.display = 'none';
            document.getElementById('loadingPanel').style.display = 'none';
            
            // ê³ ê¸‰ ì˜µì…˜ ì ‘ê¸°
            ['marketAdvanced', 'simulationAdvanced', 'mlAdvanced'].forEach(id => {
                const element = document.getElementById(id);
                if (element) element.style.display = 'none';
            });
            
            advancedSimulationData = null;
        }

        // ì´ˆê¸°í™” ì‹œ ìë™ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                executeAdvancedSimulation();
            }, 1000);
        });
    </script>
    
    <!-- ì—¬ê¸°ì„œ ë°”ë¡œ ë¡œë”© íŒ¨ë„ì´ ì™€ì•¼ í•¨ -->
    <div class="loading-panel" id="loadingPanel">
        <div class="loading-background"></div>
        <div class="loading-content">
            <div class="loading-title">ê³ ê¸‰ í™•ë¥ ë¡ ì  ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰ ì¤‘</div>
            <div class="loading-subtitle">ë‹¤ì°¨ì› ë¶„í¬ ëª¨ë¸ë§ ë° ê¸°ê³„í•™ìŠµ ê¸°ë°˜ ìµœì í™”ë¥¼ ìˆ˜í–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤...</div>
            
            <div class="loading-progress">
                <div class="loading-bar" id="loadingBar"></div>
            </div>
            
            <div class="loading-stats">
                <div class="loading-stat">
                    <span class="loading-stat-value" id="iterationCount">0</span>
                    <div class="loading-stat-label">Iterations</div>
                </div>
                <div class="loading-stat">
                    <span class="loading-stat-value" id="processedScenarios">0</span>
                    <div class="loading-stat-label">Scenarios</div>
                </div>
                <div class="loading-stat">
                    <span class="loading-stat-value" id="currentStage">ì´ˆê¸°í™”</span>
                    <div class="loading-stat-label">Current Stage</div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
